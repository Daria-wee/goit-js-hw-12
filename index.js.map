{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport const createGalleryCardTemplate = imginfo => {\n  return ` \n  <li class=\"gallery-item\">\n    <a class=\"gallery-link\" href=\"${imginfo.largeImageURL}\">\n      <img\n        class=\"gallery-image\"\n        src=\"${imginfo.webformatURL}\"\n        alt=\"${imginfo.tags}\"\n      />\n    </a>\n    <div class=\"img-details\">\n      <p class=\"detail-item\"><b>Likes:</b> ${imginfo.likes}</p>\n      <p class=\"detail-item\"><b>Views:</b> ${imginfo.views}</p>\n      <p class=\"detail-item\"><b>Comments:</b> ${imginfo.comments}</p>\n      <p class=\"detail-item\"><b>Downloads:</b> ${imginfo.downloads}</p>\n    </div>\n  </li>`;\n};\n\nexport const initializeLightbox = () => {\n  const lightbox = new SimpleLightbox('.gallery a', {\n    captions: true,\n    captionsData: 'alt',\n    captionDelay: 250,\n  });\n\n  lightbox.refresh();\n};","import axios from 'axios';\n\nconst BASE_URL = 'https://pixabay.com/api/?';\nconst API_KEY = \"49011950-2d803ac0681f77f6ebc5cb6af\";\n\nexport const getAxiosPhotos = async (searchedQuery, page) => {\n  const urlParams = new URLSearchParams({\n    key: API_KEY,\n    q: searchedQuery,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n    per_page: 40,\n    page: page,\n  });\n\ntry {\n  const response = await axios.get(`${BASE_URL}${urlParams}`);\n  return response.data;\n} catch (err) {\n  hideLoader();\n  iziToast.error({\n    message: 'Something went wrong. Please try again!',\n    position: 'topRight',\n  });\n  throw new Error(err.message);\n}\n\n};\n\n\n","import {\n  createGalleryCardTemplate,\n  initializeLightbox,\n} from './js/render-functions';\n\nimport { getAxiosPhotos } from './js/pixabay-api';\nimport iziToast from 'izitoast';\n\nconst formEl = document.querySelector('.js-search-form');\nconst galleryEl = document.querySelector('.js-gallery');\n\nconst loaderEl = document.querySelector('.js-loader');\nconst loadMoreBtnEl = document.querySelector('.load-more-btn-js');\n\nconst params = {\n  searchedValue: '',\n  page: null,\n  total: null,\n  perPage: 18,\n};\n\nconst onFormElSubmit = async event => {\n  event.preventDefault();\n  const searchQuery = formEl.elements.user_query.value.trim();\n\n  if (!searchQuery) {\n    iziToast.warning({\n      message: 'Please enter a search query!',\n      position: 'topRight',\n    });\n    return;\n  }\n\n  params.searchedValue = searchQuery;\n  params.page = 1;\n\n  showLoader();\n\n  try {\n    const data = await getAxiosPhotos(params.searchedValue, params.page, params.perPage);\n\n    if (data.hits.length === 0) {\n      iziToast.error({\n        message: 'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n      galleryEl.innerHTML = '';\n      formEl.reset();\n      hideloadBtn();\n      return;\n    }\n\n    galleryEl.innerHTML = data.hits.map(createGalleryCardTemplate).join('');\n    initializeLightbox();\n\n    params.total = data.totalHits;\n    checkBtnStatus();\n  } catch (error) {\n    iziToast.error({\n      message: 'Something went wrong. Please try again!',\n      position: 'topRight',\n    });\n  } finally {\n    hideLoader();\n  }\n};\n\nconst onloadMoreBtnElClick = async () => {\n  hideloadBtn();\n  showLoader();\n  params.page += 1;\n\n  try {\n    const data = await getAxiosPhotos(params.searchedValue, params.page, params.perPage);\n    \n    galleryEl.insertAdjacentHTML('beforeend', data.hits.map(createGalleryCardTemplate).join(''));\n    initializeLightbox();\n\n    checkBtnStatus();\n    scrollPage();\n  } catch (error) {\n    iziToast.error({\n      message: 'Something went wrong while loading more images. Please try again!',\n      position: 'topRight',\n    });\n  } finally {\n    hideLoader();\n  }\n};\n\nconst showLoader = () => loaderEl.classList.remove('is-hidden');\nconst hideLoader = () => loaderEl.classList.add('is-hidden');\nconst showloadBtn = () => loadMoreBtnEl.classList.remove('is-hidden');\nconst hideloadBtn = () => loadMoreBtnEl.classList.add('is-hidden');\n\nconst checkBtnStatus = () => {\n  const maxPage = Math.ceil(params.total / params.perPage);\n  if (params.page >= maxPage) {\n    hideloadBtn();\n    iziToast.info({\n      position: 'topRight',\n      message: \"We're sorry, but you've reached the end of search results.\",\n    });\n  } else {\n    showloadBtn();\n  }\n};\n\nconst scrollPage = () => {\n  const { height } = galleryEl.firstElementChild.getBoundingClientRect();\n  scrollBy({\n    behavior: 'smooth',\n    top: height * 2,\n  });\n};\n\n\nloadMoreBtnEl.addEventListener('click', onloadMoreBtnElClick);\nformEl.addEventListener('submit', onFormElSubmit);\n"],"names":["createGalleryCardTemplate","imginfo","initializeLightbox","SimpleLightbox","BASE_URL","API_KEY","getAxiosPhotos","searchedQuery","page","urlParams","axios","err","formEl","galleryEl","loaderEl","loadMoreBtnEl","params","onFormElSubmit","event","searchQuery","iziToast","showLoader","data","hideloadBtn","checkBtnStatus","hideLoader","onloadMoreBtnElClick","scrollPage","showloadBtn","maxPage","height"],"mappings":"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"}